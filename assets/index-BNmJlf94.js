(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))c(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&c(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function c(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();const I=document.body,x=document.querySelector("#bg-video"),p=document.querySelector("#startBtn"),i=document.querySelector("#quiz"),d=document.querySelector("#titleBack"),f=document.querySelector("#titleText"),b=document.querySelector("#white-fade");let m=0;const A="./assets/sound/bgm.mp3",S="./assets/sound/correct.mp3",L="./assets/sound/wrong.mp3",w="./assets/img/titleTop.png",q="./assets/img/titleQuiz.png",v="./assets/img/titleEnd.png",k="./assets/img/titleBackWrong.png",T="./assets/img/titleBackEnd.png",B="./assets/img/rogo.png",E="./assets/img/endText.png",g=new Audio(A),P=new Audio(S),z=new Audio(L);class N{constructor(e){this.video=e,this.startTime=0,this.elapsed=0,this.running=!1,this.callbacks=[],this.tickInterval=null}add(e,n){this.callbacks.push({time:e,action:n,executed:!1})}async play(){if(!this.running){this.running=!0;try{await this.video.play()}catch(e){console.warn("Autoplay blocked:",e)}this.startTime=performance.now()-this.elapsed,this.tickInterval=setInterval(()=>this.update(),100)}}pause(){this.running&&(this.running=!1,this.elapsed=performance.now()-this.startTime,clearInterval(this.tickInterval),this.video.pause())}reset(){this.pause(),this.video.currentTime=0,this.elapsed=0,this.startTime=0,this.callbacks.forEach(e=>e.executed=!1)}get time(){return this.running?(performance.now()-this.startTime)/1e3:this.elapsed/1e3}update(){const e=this.time;this.callbacks.forEach(n=>{!n.executed&&e>=n.time&&(n.executed=!0,n.action())})}}const r=new N(x),u=[{questionTextImg:"./assets/img/q1text.png",titleBackImg:"./assets/img/q1titleBack.png",questionNoImg:"./assets/img/q1No.png",a:{beforeImg:"./assets/img/q1aBefore.png",afterImg:"./assets/img/q1aAfter.png",correct:!1},b:{beforeImg:"./assets/img/q1bBefore.png",afterImg:"./assets/img/q1bAfter.png",correct:!0}},{questionTextImg:"./assets/img/q2text.png",titleBackImg:"./assets/img/q2titleBack.png",questionNoImg:"./assets/img/q2No.png",a:{beforeImg:"./assets/img/q2aBefore.png",afterImg:"./assets/img/q2aAfter.png",correct:!0},b:{beforeImg:"./assets/img/q2bBefore.png",afterImg:"./assets/img/q2bAfter.png",correct:!1}},{questionTextImg:"./assets/img/q3text.png",titleBackImg:"./assets/img/q3titleBack.png",questionNoImg:"./assets/img/q3No.png",a:{beforeImg:"./assets/img/q3aBefore.png",afterImg:"./assets/img/q3aAfter.png",correct:!0},b:{beforeImg:"./assets/img/q3bBefore.png",afterImg:"./assets/img/q3bAfter.png",correct:!1}}];r.add(5,()=>h(0));r.add(10,()=>h(1));r.add(15,()=>h(2));r.add(18,()=>O());r.add(19,()=>$());async function C(){const t=["./assets/end.jpg",w,q,v,k,T,E,B];u.forEach(e=>{t.push(e.a.beforeImg,e.b.beforeImg,e.a.afterImg,e.b.afterImg,e.questionTextImg,e.questionNoImg,e.titleBackImg)}),t.forEach(e=>{const n=new Image;n.src=e})}window.addEventListener("load",()=>{C()});p.addEventListener("click",async()=>{I.classList.remove("start-screen"),p.style.display="none";try{f.src=q,r.reset(),await r.play(),g.loop=!0,g.currentTime=1.5,g.volume=.2,g.play()}catch(t){console.warn("Video playback blocked:",t)}m=0});function h(t){const e=u[t];r.pause(),d.src=e.titleBackImg,i.innerHTML=`
    <div class="quiz">
      <img id="questionNo" src="${e.questionNoImg}">
      <img id="questionText" src="${e.questionTextImg}">
      <div class="answers">
        <img class="ansA" src="${e.a.beforeImg}" onclick="selectAnswer('a')">
        <img class="ansB" src="${e.b.beforeImg}" onclick="selectAnswer('b')">
      </div>
    </div>
  `}window.selectAnswer=function(t){const e=u[m][t],n=e.correct;document.querySelectorAll(".answers img").forEach(y=>{y.style.pointerEvents="none",y.style.opacity="0.6"}),M(n?"correct":"wrong"),n||(d.src=k);const s=document.querySelector(`.ans${t.toUpperCase()}`),o=s.getBoundingClientRect(),l=s.parentElement.getBoundingClientRect(),a=document.createElement("img");a.src=e.afterImg,Object.assign(a.style,{position:"absolute",width:"35%",opacity:"1",transition:"opacity 0.3s ease-in-out",zIndex:7,pointerEvents:"none"}),a.style.left=`${o.left-l.left+o.width/2}px`,a.style.top=`${o.top-l.top+o.height/2}px`,a.style.transform="translate(-50%, -50%)",s.parentElement.appendChild(a),setTimeout(()=>{a.remove(),i.innerHTML="",m++,r.play()},2e3)};function O(){b.style.opacity="1"}function $(){b.style.opacity="0",i.innerHTML="",r.pause(),g.pause(),d.src=T,f.src=v;const t=document.createElement("img");t.src="",Object.assign(t.style,{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"cover",zIndex:"0"});const e=document.createElement("img");e.src=E,Object.assign(e.style,{position:"absolute",top:"45%",left:"50%",transform:"translate(-50%, -50%)",width:"40vw",zIndex:"2",pointerEvents:"none"});const n=document.createElement("img");n.src=B,Object.assign(n.style,{position:"absolute",top:"65%",left:"50%",transform:"translate(-50%, -50%)",width:"25vw",zIndex:"2",pointerEvents:"none"}),i.appendChild(t),i.appendChild(e),i.appendChild(n);const c=()=>{j(),i.removeEventListener("click",c),e.remove(),n.remove(),t.remove()};i.addEventListener("click",c)}function j(){r.pause(),r.reset(),i.innerHTML="",p.style.display="block",I.classList.add("start-screen"),m=0,d.src=u[0].titleBackImg,f.src=w}function M(t){if(t==="correct"){P.play();return}if(t==="wrong"){z.play();return}}
