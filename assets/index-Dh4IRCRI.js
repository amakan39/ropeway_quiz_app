(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))c(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&c(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function c(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();const y=document.body,q=document.querySelector("#bg-video"),p=document.querySelector("#startBtn"),r=document.querySelector("#quiz"),u=document.querySelector("#titleBack"),f=document.querySelector("#titleText"),b=document.querySelector("#white-fade");let m=0;const v="./assets/sound/bgm.mp3",w="./assets/img/titleTop.png",k="./assets/img/titleQuiz.png",T="./assets/img/titleEnd.png",B="./assets/img/titleBackWrong.png",x="./assets/img/titleBackEnd.png",E="./assets/img/rogo.png",A="./assets/img/endText.png",g=new Audio(v);class z{constructor(e){this.video=e,this.startTime=0,this.elapsed=0,this.running=!1,this.callbacks=[],this.tickInterval=null}add(e,n){this.callbacks.push({time:e,action:n,executed:!1})}async play(){if(!this.running){this.running=!0;try{await this.video.play()}catch(e){console.warn("Autoplay blocked:",e)}this.startTime=performance.now()-this.elapsed,this.tickInterval=setInterval(()=>this.update(),100)}}pause(){this.running&&(this.running=!1,this.elapsed=performance.now()-this.startTime,clearInterval(this.tickInterval),this.video.pause())}reset(){this.pause(),this.video.currentTime=0,this.elapsed=0,this.startTime=0,this.callbacks.forEach(e=>e.executed=!1)}get time(){return this.running?(performance.now()-this.startTime)/1e3:this.elapsed/1e3}update(){const e=this.time;this.callbacks.forEach(n=>{!n.executed&&e>=n.time&&(n.executed=!0,n.action())})}}const o=new z(q),d=[{questionTextImg:"./assets/img/q1text.png",titleBackImg:"./assets/img/q1titleBack.png",questionNoImg:"./assets/img/q1No.png",a:{beforeImg:"./assets/img/q1aBefore.png",afterImg:"./assets/img/q1aAfter.png",correct:!1},b:{beforeImg:"./assets/img/q1bBefore.png",afterImg:"./assets/img/q1bAfter.png",correct:!0}},{questionTextImg:"./assets/img/q2text.png",titleBackImg:"./assets/img/q2titleBack.png",questionNoImg:"./assets/img/q2No.png",a:{beforeImg:"./assets/img/q2aBefore.png",afterImg:"./assets/img/q2aAfter.png",correct:!0},b:{beforeImg:"./assets/img/q2bBefore.png",afterImg:"./assets/img/q2bAfter.png",correct:!1}},{questionTextImg:"./assets/img/q3text.png",titleBackImg:"./assets/img/q3titleBack.png",questionNoImg:"./assets/img/q3No.png",a:{beforeImg:"./assets/img/q3aBefore.png",afterImg:"./assets/img/q3aAfter.png",correct:!0},b:{beforeImg:"./assets/img/q3bBefore.png",afterImg:"./assets/img/q3bAfter.png",correct:!1}}];o.add(5,()=>h(0));o.add(10,()=>h(1));o.add(15,()=>h(2));o.add(18,()=>N());o.add(19,()=>S());function L(){const t=[];d.forEach(e=>{t.push(e.a.beforeImg,e.b.beforeImg,e.a.afterImg,e.b.afterImg,e.questionTextImg,e.questionNoImg,e.titleBackImg)}),t.push("./assets/end.jpg"),t.forEach(e=>{const n=new Image;n.src=e})}L();p.addEventListener("click",async()=>{y.classList.remove("start-screen"),p.style.display="none";try{f.src=k,o.reset(),await o.play(),g.loop=!0,g.currentTime=1.5,g.volume=.2,g.play()}catch(t){console.warn("Video playback blocked:",t)}m=0});function h(t){const e=d[t];o.pause(),u.src=e.titleBackImg,r.innerHTML=`
    <div class="quiz">
      <img id="questionNo" src="${e.questionNoImg}">
      <img id="questionText" src="${e.questionTextImg}">
      <div class="answers">
        <img class="ansA" src="${e.a.beforeImg}" onclick="selectAnswer('a')">
        <img class="ansB" src="${e.b.beforeImg}" onclick="selectAnswer('b')">
      </div>
    </div>
  `}window.selectAnswer=function(t){const e=d[m][t],n=e.correct;document.querySelectorAll(".answers img").forEach(I=>{I.style.pointerEvents="none",I.style.opacity="0.6"}),C(n?"correct.mp3":"wrong.mp3"),n||(u.src=B);const s=document.querySelector(`.ans${t.toUpperCase()}`),i=s.getBoundingClientRect(),l=s.parentElement.getBoundingClientRect(),a=document.createElement("img");a.src=e.afterImg,Object.assign(a.style,{position:"absolute",width:"35%",opacity:"1",transition:"opacity 0.3s ease-in-out",zIndex:7,pointerEvents:"none"}),a.style.left=`${i.left-l.left+i.width/2}px`,a.style.top=`${i.top-l.top+i.height/2}px`,a.style.transform="translate(-50%, -50%)",s.parentElement.appendChild(a),setTimeout(()=>{a.remove(),r.innerHTML="",m++,o.play()},2e3)};function N(){b.style.opacity="1"}function S(){b.style.opacity="0",r.innerHTML="",o.pause(),g.pause(),u.src=x,f.src=T;const t=document.createElement("img");t.src="",Object.assign(t.style,{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"cover",zIndex:"0"});const e=document.createElement("img");e.src=A,Object.assign(e.style,{position:"absolute",top:"45%",left:"50%",transform:"translate(-50%, -50%)",width:"40vw",zIndex:"2",pointerEvents:"none"});const n=document.createElement("img");n.src=E,Object.assign(n.style,{position:"absolute",top:"65%",left:"50%",transform:"translate(-50%, -50%)",width:"25vw",zIndex:"2",pointerEvents:"none"}),r.appendChild(t),r.appendChild(e),r.appendChild(n);const c=()=>{P(),r.removeEventListener("click",c),e.remove(),n.remove(),t.remove()};r.addEventListener("click",c)}function P(){o.pause(),o.reset(),r.innerHTML="",p.style.display="block",y.classList.add("start-screen"),m=0,u.src=d[0].titleBackImg,f.src=w}function C(t){const e=new Audio(`./assets/sound/${t}`);e.volume=.8,e.play()}
