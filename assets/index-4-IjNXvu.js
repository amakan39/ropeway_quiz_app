(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))r(t);new MutationObserver(t=>{for(const n of t)if(n.type==="childList")for(const c of n.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function o(t){const n={};return t.integrity&&(n.integrity=t.integrity),t.referrerPolicy&&(n.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?n.credentials="include":t.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(t){if(t.ep)return;t.ep=!0;const n=o(t);fetch(t.href,n)}})();const p=document.querySelector("#bg-video"),d=document.querySelector("#startBtn"),i=document.querySelector("#quiz");document.querySelector("#character");const u=document.querySelector("#titleBack"),f=document.querySelector("#titleText");let m=0;const q="./assets/sound/bgm.mp3",w="./assets/img/titleTop.png",b="./assets/img/titleEnd.png",B="./assets/img/titleBackWrong.png",v="./assets/img/titleBackEnd.png",E="./assets/img/rogo.png",k="./assets/img/endText.png",l=new Audio(q);let y=!0;const g=[{questionTextImg:"./assets/img/q1text.png",titleBackImg:"./assets/img/q1titleBack.jpg",questionNoImg:"./assets/img/q1No.png",a:{beforeImg:"./assets/img/q1aBefore.png",afterImg:"./assets/img/q1aAfter.png",correct:!1},b:{beforeImg:"./assets/img/q1bBefore.png",afterImg:"./assets/img/q1bAfter.png",correct:!0}},{questionTextImg:"./assets/img/q2text.png",titleBackImg:"./assets/img/q2titleBack.png",questionNoImg:"./assets/img/q2No.png",a:{beforeImg:"./assets/img/q2aBefore.png",afterImg:"./assets/img/q2aAfter.png",correct:!0},b:{beforeImg:"./assets/img/q2bBefore.png",afterImg:"./assets/img/q2bAfter.png",correct:!1}},{questionTextImg:"./assets/img/q3text.png",titleBackImg:"./assets/img/q3titleBack.png",questionNoImg:"./assets/img/q3No.png",a:{beforeImg:"./assets/img/q3aBefore.png",afterImg:"./assets/img/q3aAfter.png",correct:!0},b:{beforeImg:"./assets/img/q3bBefore.png",afterImg:"./assets/img/q3bAfter.png",correct:!1}}];function x(){const s=[];g.forEach(e=>{s.push(e.a.beforeImg,e.b.beforeImg,e.a.afterImg,e.b.afterImg,e.questionTextImg,e.questionNoImg,e.titleBackImg)}),s.push("./assets/end.jpg"),s.forEach(e=>{const o=new Image;o.src=e})}x();d.addEventListener("click",async()=>{d.style.display="none";try{f.src=b,l.loop=!0,l.currentTime=1,l.play(),await p.play();const s=[];g.forEach(e=>{s.push(e.a.img,e.b.img,e.a.afterImg,e.b.afterImg)})}catch(s){console.warn("Video playback blocked:",s)}h(0)});function h(s){const e=g[s];m=s,u.src=e.titleBackImg,i.innerHTML=`
    <div class="quiz">
      <img id="questionNo" src="${e.questionNoImg}">
      <img id="questionText" src="${e.questionTextImg}">
      <div class="answers">
        <img class="ansA" src="${e.a.beforeImg}" onclick="selectAnswer('a')">
        <img class="ansB" src="${e.b.beforeImg}" onclick="selectAnswer('b')">
      </div>
    </div>
  `}window.selectAnswer=function(s){const e=g[m][s],o=e.correct;y=o,document.querySelectorAll(".answers img").forEach(I=>{I.style.pointerEvents="none",I.style.opacity="0.6"}),z(o?"correct.mp3":"wrong.mp3"),o||(u.src=B);const t=document.querySelector(`.ans${s.toUpperCase()}`),n=t.getBoundingClientRect(),c=t.parentElement.getBoundingClientRect(),a=document.createElement("img");a.src=e.afterImg,Object.assign(a.style,{position:"absolute",width:"35%",opacity:"1",transition:"opacity 0.3s ease-in-out",zIndex:5,pointerEvents:"none"}),a.style.left=`${n.left-c.left+n.width/2}px`,a.style.top=`${n.top-c.top+n.height/2}px`,a.style.transform="translate(-50%, -50%)",t.parentElement.appendChild(a),setTimeout(()=>{m<g.length-1?h(m+1):T()},3e3)};function T(){const s=document.getElementById("bg-video");i.innerHTML="",s.pause(),l.pause(),u.src=v,f.src=b;const e=document.createElement("img");y?e.src="":e.src="./assets/img/q3wrongBack.png",Object.assign(e.style,{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"cover",zIndex:"0"});const o=document.createElement("img");o.src=k,Object.assign(o.style,{position:"absolute",top:"45%",left:"50%",transform:"translate(-50%, -50%)",width:"40vw",zIndex:"2",pointerEvents:"none"});const r=document.createElement("img");r.src=E,Object.assign(r.style,{position:"absolute",top:"65%",left:"50%",transform:"translate(-50%, -50%)",width:"25vw",zIndex:"2",pointerEvents:"none"}),i.appendChild(e),i.appendChild(o),i.appendChild(r);const t=()=>{A(),i.removeEventListener("click",t),o.remove(),r.remove(),e.remove()};i.addEventListener("click",t)}function A(){p.currentTime=0,p.pause(),i.innerHTML="",d.style.display="block",m=0,u.src=g[0].titleBackImg,f.src=w}function z(s){new Audio(`./assets/sound/${s}`).play()}
